<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Матричный дождь с логотипом</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: black;
            overflow: hidden;
            font-family: monospace;
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
        }

        #matrixCanvas {
            z-index: 20;
        }
    </style>
</head>
<body>
    <canvas id="matrixCanvas"></canvas>
    <canvas id="logoCanvas"></canvas>

    <script>
        // Основные элементы
        const matrixCanvas = document.getElementById('matrixCanvas');
        const matrixCtx = matrixCanvas.getContext('2d');
        const logoCanvas = document.getElementById('logoCanvas');
        const logoCtx = logoCanvas.getContext('2d', { willReadFrequently: true });

        // Настройка размеров
        function resizeCanvases() {
            matrixCanvas.width = window.innerWidth;
            matrixCanvas.height = window.innerHeight;
            logoCanvas.width = window.innerWidth;
            logoCanvas.height = window.innerHeight;
        }
        
        resizeCanvases();

        // Настройки матрицы
        const fontSize = 14; // Размер шрифта символов
        let columns = Math.floor(matrixCanvas.width / fontSize);
        let rows = Math.floor(matrixCanvas.height / fontSize);

        // Символы матрицы
        const symbols = "◯";
        const symbolArray = symbols.split('');

        // Капли дождя
        let drops = [];

        // Маска логотипа
        let logoMask = new Uint8Array(columns * rows);
        let logoLoaded = false;

        // Время последнего кадра для анимации
        let lastFrameTime = 0;
        const frameRate = 30;

        // Градиентные цвета для логотипа (бирюзово-голубые оттенки)
        const gradientColors = [
            [83, 167, 253],  // Голубой
            [52, 152, 219],  // Другой оттенок голубого
            [39, 229, 215],  // Бирюзовый
            [26, 188, 156]   // Другой оттенок бирюзового
        ];

        // НАСТРОЙКИ ЦВЕТОВ ФОНА - СЕРЫЙ ВМЕСТО ЗЕЛЕНОГО
        const backgroundRainColor = "rgba(100, 100, 100, 0.15)"; // Серый цвет
        const backgroundRainColorFull = "#666"; // Полный серый для основных капель

        // Функция для создания маски из изображения
        function createMaskFromImage(img) {
            // Проверяем, что изображение загружено
            if (!img.complete || !img.naturalWidth) {
                console.error("Изображение не загружено");
                return;
            }
            
            // Создаем временный невидимый холст для обработки изображения
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = logoCanvas.width;
            tempCanvas.height = logoCanvas.height;
            const tempCtx = tempCanvas.getContext('2d');
            
            // Рассчитываем размер логотипа чтобы он занимал 70% холста, сохраняя пропорции
            const logoRatio = img.width / img.height;
            let logoWidth, logoHeight;
            
            if (logoCanvas.width / logoCanvas.height > logoRatio) {
                // Экран шире, чем логотип
                logoHeight = logoCanvas.height * 0.7;
                logoWidth = logoHeight * logoRatio;
            } else {
                // Экран уже, чем логотип
                logoWidth = logoCanvas.width * 0.7;
                logoHeight = logoWidth / logoRatio;
            }
            
            // Вычисляем координаты для центрирования
            const offsetX = (logoCanvas.width - logoWidth) / 2;
            const offsetY = (logoCanvas.height - logoHeight) / 2;
            
            // Рисуем логотип на временном холсте (не видимом пользователю)
            tempCtx.drawImage(img, offsetX, offsetY, logoWidth, logoHeight);
            
            // Получаем данные пикселей с временного холста
            const imageData = tempCtx.getImageData(0, 0, tempCanvas.width, tempCanvas.height);
            const pixels = imageData.data;
            
            // Обновляем маску логотипа в соответствии с новыми размерами
            logoMask = new Uint8Array(columns * rows);
            
            // Создаем маску с высокой детализацией
            for (let y = 0; y < rows; y++) {
                for (let x = 0; x < columns; x++) {
                    // Координаты пикселя на холсте
                    const canvasX = x * fontSize;
                    const canvasY = y * fontSize;
                    
                    // Проверяем, что координаты внутри холста
                    if (canvasX >= 0 && canvasX < tempCanvas.width && 
                        canvasY >= 0 && canvasY < tempCanvas.height) {
                        
                        // Индекс в массиве пикселей (RGBA)
                        const i = (canvasY * tempCanvas.width + canvasX) * 4;
                        
                        // Проверяем прозрачность (альфа-канал)
                        const alpha = pixels[i + 3];
                        
                        // Учитываем непрозрачные пиксели
                        if (alpha > 30) {
                            logoMask[y * columns + x] = 1;
                        }
                    }
                }
            }
            
            // Применяем сглаживание краев для более плавного контура
            const tempMask = new Uint8Array(logoMask.length);
            for (let y = 1; y < rows - 1; y++) {
                for (let x = 1; x < columns - 1; x++) {
                    const idx = y * columns + x;
                    
                    // Подсчитываем количество соседних пикселей в маске
                    let count = 0;
                    for (let dy = -1; dy <= 1; dy++) {
                        for (let dx = -1; dx <= 1; dx++) {
                            count += logoMask[(y + dy) * columns + (x + dx)];
                        }
                    }
                    
                    // Если более 2 соседей - это часть логотипа
                    tempMask[idx] = (count >= 2) ? 1 : 0;
                }
            }
            
            // Копируем обработанную маску обратно
            for (let i = 0; i < logoMask.length; i++) {
                logoMask[i] = tempMask[i];
            }
            
            logoLoaded = true;
            console.log("Логотип загружен и маска создана");
        }

        // Получение цвета градиента
        function getGradientColor(position) {
            // position от 0 до 1
            const segmentCount = gradientColors.length - 1;
            const segmentPosition = position * segmentCount;
            const segmentIndex = Math.floor(segmentPosition);
            const segmentOffset = segmentPosition - segmentIndex;
            
            // Получаем два ближайших цвета для интерполяции
            const color1 = gradientColors[segmentIndex];
            const color2 = gradientColors[Math.min(segmentIndex + 1, gradientColors.length - 1)];
            
            // Интерполяция между цветами
            const r = Math.round(color1[0] + segmentOffset * (color2[0] - color1[0]));
            const g = Math.round(color1[1] + segmentOffset * (color2[1] - color1[1]));
            const b = Math.round(color1[2] + segmentOffset * (color2[2] - color1[2]));
            
            return `rgb(${r}, ${g}, ${b})`;
        }

        // Инициализация капель дождя
        function initDrops() {
            drops = [];

            // Создаем много капель для высокой плотности
            for (let i = 0; i < columns * 4; i++) {
                drops.push(Math.floor(Math.random() * rows));
            }
        }

        // Создание и загрузка встроенного SVG логотипа
        function loadSVGLogo() {
            // Используем точно такой же SVG логотип, который предоставил пользователь
            const svgLogo = `<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   version="1.1"
   id="svg1"
   width="1029.3333"
   height="177.33333"
   viewBox="0 0 1029.3333 177.33333"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <defs
     id="defs1" />
  <g
     id="g1">
    <path
       style="fill:#000000"
       d="m 358.77059,146.06518 c -13.23205,-2.88332 -17.33372,-5.00444 -24.30777,-12.57039 -6.60809,-7.16893 -11.02556,-15.41519 -11.02556,-20.5818 0,-2.08255 -0.65759,-4.44404 -1.46131,-5.24776 -0.97618,-0.97618 -1.28241,-7.814998 -0.92245,-20.599998 0.63779,-22.65262 2.82585,-29.79979 12.50876,-40.85913 8.38342,-9.57513 15.49587,-12.88528 32.20833,-14.9898 16.93397,-2.13241 37.46329,-0.0606 46.99999,4.74334 8.04062,4.05027 16.67873,13.0298 20.96799,21.79675 3.07883,6.29289 3.63171,9.50991 4.46998,26.00896 0.54753,10.77659 0.44461,19.369508 -0.24069,20.094518 -0.6585,0.69666 -1.21046,3.39666 -1.22656,6 -0.0497,8.03101 -10.76207,26.73333 -15.31242,26.73333 -1.0954,0 -1.99163,0.60882 -1.99163,1.35293 0,2.06742 -8.24265,6.63542 -12,6.6503 -1.83333,0.007 -5.05192,0.9095 -7.15241,2.00498 -5.2671,2.74699 -27.78162,2.45617 -41.51425,-0.53623 z m 25.99999,-26.80531 c 0,-0.73334 0.64004,-1.33334 1.4223,-1.33334 3.13033,0 10.41675,-7.08041 13.40751,-13.02843 1.7436,-3.46769 3.52584,-6.604898 3.96053,-6.971558 1.61145,-1.3593 2.48717,-9.33334 1.025,-9.33334 -0.85417,0 -1.20978,-1.64585 -0.86426,-4 0.32289,-2.2 0.21152,-4 -0.24748,-4 -0.45901,0 -1.54337,-1.95 -2.40968,-4.33333 -1.60029,-4.40257 -4.83065,-8.33526 -11.7714,-14.33069 -2.98257,-2.57635 -5.34056,-3.33128 -10.4114,-3.33333 -4.0613,-0.002 -6.76694,0.63149 -7.11111,1.66402 -0.30556,0.91667 -1.25556,1.69445 -2.11112,1.72841 -0.85555,0.034 -3.35555,2.47408 -5.55555,5.42251 -2.2,2.94842 -5.2,6.67064 -6.66667,8.27159 -3.70987,4.04955 -3.95996,24.18011 -0.33333,26.831958 1.28333,0.9384 2.33333,2.38195 2.33333,3.20791 0,2.19718 9.50121,10.73479 13,11.68157 1.65,0.44649 3,1.34676 3,2.00059 0,0.65384 2.1,1.18879 4.66667,1.18879 2.56666,0 4.66666,-0.6 4.66666,-1.33333 z M 325.45916,87.512222 c -0.8071,-2.09455 -0.95519,-2.0969 -2.1137,-0.0336 -0.68518,1.22031 -0.85544,3.23599 -0.37834,4.47928 0.80795,2.10548 0.95293,2.10779 2.1137,0.0336 0.68544,-1.22481 0.85569,-3.24048 0.37834,-4.47927 z m 109.89357,1.41432 c -0.0734,-4.3408 -0.24357,-4.60428 -1.29092,-1.99852 -1.07215,2.66748 -0.54525,6.99852 0.85142,6.99852 0.28821,0 0.48599,-2.25 0.4395,-5 z m -54.24881,-34.54971 c -0.91667,-0.36988 -2.41667,-0.36988 -3.33334,0 -0.91666,0.36988 -0.16666,0.67251 1.66667,0.67251 1.83333,0 2.58333,-0.30263 1.66667,-0.67251 z m 219.33331,93.330208 c -3.48333,-0.3263 -6.33333,-1.16041 -6.33333,-1.85356 0,-0.69315 -1.68253,-1.26028 -3.73896,-1.26028 -7.26806,0 -24.26104,-14.07833 -24.26104,-20.09978 0,-1.18737 -1.17219,-3.51041 -2.60488,-5.16231 -3.52238,-4.06135 -4.6971,-12.25767 -4.59777,-32.079928 0.082,-16.35605 3.03971,-31.99131 6.05184,-31.99131 0.63295,0 1.15081,-0.92857 1.15081,-2.06349 0,-3.20057 12.72607,-15.15842 19.02059,-17.8724 12.98245,-5.59757 46.60594,-6.66494 60.08989,-1.90752 11.10961,3.9197 26.22285,19.07364 26.22285,26.29347 0,1.21913 0.53322,2.21661 1.18494,2.21661 1.83192,0 2.80929,7.38487 3.5049,26.48265 0.40764,11.19167 0.15755,17.517338 -0.69257,17.517338 -0.73183,0 -1.33061,2.4 -1.33061,5.33334 0,2.93333 -0.6,5.33333 -1.33333,5.33333 -0.73333,0 -1.33333,1.5 -1.33333,3.33333 0,1.83334 -0.6,3.33334 -1.33333,3.33334 -0.73334,0 -1.33334,0.81552 -1.33334,1.81228 0,3.75979 -10.92167,14.14584 -19.07018,18.13494 -7.64958,3.74484 -9.55021,4.08413 -25.59648,4.56923 -9.53333,0.2882 -20.18333,0.25703 -23.66667,-0.0693 z m 21.66667,-28.44717 c 0,-0.73334 0.89827,-1.33334 1.99616,-1.33334 3.04638,0 12.13935,-8.81924 14.10567,-13.68106 0.96073,-2.37541 2.38083,-4.747048 3.1558,-5.270298 1.8913,-1.27699 1.82337,-18.21414 -0.0779,-19.4306 -0.81783,-0.52325 -1.91702,-2.32895 -2.44264,-4.01265 -1.41452,-4.5311 -12.06326,-14.93872 -15.28481,-14.93872 -1.53208,0 -2.78559,-0.6785 -2.78559,-1.50779 0,-2.21064 -8.4332,-0.5365 -12.09621,2.40131 -10.22201,8.19829 -14.58999,13.65431 -16.07223,20.07573 -1.79832,7.79075 -0.67029,17.36134 2.5521,21.652978 6.0222,8.02045 11.58283,13.48588 14.45397,14.20649 1.7393,0.43654 3.16237,1.32866 3.16237,1.98249 0,0.65384 2.1,1.18879 4.66666,1.18879 2.56667,0 4.66667,-0.6 4.66667,-1.33333 z m -2.33333,-64.883038 c -0.91667,-0.36988 -2.41667,-0.36988 -3.33334,0 -0.91666,0.36988 -0.16666,0.67251 1.66667,0.67251 1.83333,0 2.58333,-0.30263 1.66667,-0.67251 z m 231.66664,92.918758 c -9.84813,-1.27305 -18.5578,-5.3181 -25.77514,-11.97081 -7.3963,-6.81767 -14.22485,-19.7052 -14.22485,-26.84656 0,-2.87009 -0.51417,-5.21835 -1.1426,-5.21835 -0.62843,0 -0.87892,-7.349998 -0.55664,-16.333328 0.70139,-19.55103 4.16948,-30.70526 12.48372,-40.15073 9.24388,-10.50161 18.70122,-14.3962 39.69723,-16.34757 9.26313,-0.86092 34.2565,2.21372 42.0227,5.16956 3.82148,1.45446 3.83424,1.49781 3.00948,10.22803 -0.45555,4.82205 -0.83254,12.21737 -0.83775,16.43404 l -0.009,7.66667 h -4.1529 c -3.97559,0 -16.84309,-5.90181 -18.7688,-8.60849 -0.50693,-0.71252 -5.00693,-1.50993 -10,-1.77202 -7.88958,-0.41413 -9.5977,-0.0712 -13.04499,2.61866 -6.34986,4.95475 -11.04612,10.20935 -12.93168,14.46913 -0.96393,2.17766 -2.20613,3.95938 -2.76044,3.95938 -1.51827,0 -1.21133,15.71687 0.32548,16.66667 0.73333,0.45322 1.33333,1.97559 1.33333,3.383038 0,3.85338 14.00943,17.28362 18.02899,17.28362 1.81739,0 3.30434,0.6 3.30434,1.33334 0,3.11637 19.19459,0.30577 22,-3.22139 2.30808,-2.90189 6.98647,-4.77861 11.91234,-4.77861 h 4.75433 v 9.8139 c 0,5.39765 0.36912,12.50693 0.82026,15.79841 0.98308,7.17229 1.00066,7.1616 -16.1536,9.8162 -12.66371,1.9597 -27.14166,2.1832 -39.33333,0.60721 z M 814.65458,86.899632 c -0.90881,-2.85842 -0.98113,-2.87106 -1.87489,-0.32772 -0.51129,1.45496 -0.63464,3.77336 -0.27412,5.15201 0.58784,2.2479 0.78137,2.28173 1.87488,0.32772 0.67067,-1.1984 0.79402,-3.51681 0.27413,-5.15201 z M 9.4372816,89.259872 V 31.926542 H 26.103947 42.770612 V 89.259872 146.5932 H 26.103947 9.4372816 Z M 37.775069,142.25987 c 0.412031,-1.24609 -2.317021,-1.66667 -10.814655,-1.66667 -10.542588,0 -16.019936,1.61316 -10.539457,3.10403 4.859525,1.32195 20.796426,0.24922 21.354112,-1.43736 z M 70.77061,89.272022 v -57.34548 h 15.457334 15.457336 l 18.54266,27.13576 c 21.4293,31.36013 19.71921,31.7024 18.99781,-3.80243 l -0.4741,-23.33333 h 16.00948 16.00947 v 57.33333 57.333328 l -15.20917,-0.0657 -15.20918,-0.0657 -7.5366,-10.601 c -4.14513,-5.83054 -12.23234,-17.50099 -17.97157,-25.93433 -5.73923,-8.43333 -11.00635,-15.933328 -11.70471,-16.666658 -0.80545,-0.8458 -1.10502,8.661188 -0.81925,25.999998 l 0.45049,27.33333 -16.000001,0.0122 -15.999999,0.0122 z m 24.895011,53.114528 c 2.20717,-1.99746 2.466333,-5.06263 2.733814,-32.33333 l 0.295493,-30.126678 0.755042,30.666658 0.75504,30.66667 -0.0505,-31.00152 c -0.0322,-19.745088 -0.534657,-31.001508 -1.383867,-31.001508 -0.83987,0 -1.465794,11.35022 -1.691241,30.668178 l -0.357907,30.66818 h -9.230074 c -5.076538,0 -9.569218,0.54875 -9.983733,1.21945 -2.043276,3.30609 14.559101,3.83083 18.157963,0.5739 z m 67.771649,0.20665 c 1.44675,-1.74323 0.53631,-2 -7.09139,-2 -4.81318,0 -9.09038,0.54875 -9.5049,1.21945 -1.93431,3.1298 14.0237,3.88033 16.59629,0.78055 z m 5.01589,-53.305088 c -0.2697,-40.00876 -0.72877,-51.93308 -2.01589,-52.36188 -1.31777,-0.43901 -1.60188,10.28395 -1.35717,51.22253 l 0.3095,51.777768 0.72966,-51.333328 0.72967,-51.33333 -0.0392,52.93428 c -0.0215,29.113848 0.41799,52.476698 0.97673,51.917438 0.55874,-0.55926 0.85874,-24.32983 0.66667,-52.823478 z m 29.65075,-0.0282 -3e-5,-57.33333 15.36391,0.065 15.36391,0.065 11.40135,16.60167 c 6.27074,9.13092 14.50699,21.22965 18.30278,26.88606 l 6.90143,10.28439 0.35937,-26.95105 0.35937,-26.95106 h 15.64063 15.64063 v 57.33333 57.333328 l -15.24416,-0.0658 c -12.09543,-0.0522 -15.3761,-0.46532 -15.88297,-2 -0.35135,-1.06381 -1.35677,-2.5342 -2.23426,-3.26753 -2.5993,-2.17227 -28.63861,-40.21594 -28.63861,-41.841278 0,-0.82063 -0.46103,-1.49205 -1.02451,-1.49205 -0.56348,0 -2.08391,-1.65 -3.37873,-3.66667 -2.28578,-3.56008 -2.3432,-2.85273 -1.97548,24.333328 l 0.37872,28 H 213.7706 198.10393 Z m 24.55764,54.524008 c 4.80123,-1.8424 1.50002,-3.19068 -7.81226,-3.19068 -9.13939,0 -13.79281,1.48576 -9.75367,3.11419 2.41758,0.97467 15.0816,1.02982 17.56593,0.0765 z m 67.99999,0 c 4.69819,-1.80286 1.59015,-3.19068 -7.14559,-3.19068 -8.57667,0 -13.02777,1.52543 -9.087,3.11419 2.41814,0.9749 13.7522,1.02831 16.23259,0.0765 z m 170.7757,-54.524008 v -57.33333 h 39.33334 39.33333 v 14.33333 14.33333 h -23 -23 v 8 8 h 21.66666 21.66667 v 14 13.999998 h -21.66667 -21.66666 v 21 21 h -16.33333 -16.33334 z m 26.55762,54.524008 c 5.0785,-1.9488 1.22875,-3.19068 -9.89095,-3.19068 -6.6,0 -12,0.55601 -12,1.23557 0,0.67956 1.05,1.50996 2.33333,1.84533 3.59847,0.94038 17.19424,1.01669 19.55762,0.10978 z m 47.17781,-53.886948 c -0.25052,-5.24921 -1.03039,-8.63285 -2.06876,-8.97568 -1.22573,-0.40469 -1.66667,1.88959 -1.66667,8.67195 0,5.07222 0.41,9.63222 0.91111,10.13333 2.06322,2.063228 3.20264,-1.90233 2.82432,-9.8296 z m -1.96458,0.69627 c 0.006,-5.13333 0.24691,-7.06995 0.53555,-4.30359 0.28863,2.76635 0.28379,6.96635 -0.0108,9.33333 -0.29455,2.36698 -0.5307,0.1036 -0.52479,-5.02974 z m 166.22883,-1.33333 -3e-4,-57.33333 27.66697,0.40707 c 36.63496,0.53901 45.73881,1.64757 51.85761,6.31461 7.47716,5.70311 9.74575,12.26258 9.78007,28.27832 0.0177,8.24174 -0.49998,13.66666 -1.30405,13.66666 -0.73333,0 -1.33333,1.9103 -1.33333,4.24512 0,3.32799 -1.38998,5.58487 -6.43376,10.44644 l -6.43377,6.201318 12.43376,18.25726 c 9.33923,13.71337 12.4338,19.32653 12.4339,22.55356 l 1.4e-4,4.2963 -18.83027,-0.10369 -18.83027,-0.10368 -11.83552,-18.56298 c -6.50953,-10.20964 -11.83597,-19.01298 -11.83653,-19.56298 -5.6e-4,-0.55 -1.27526,-1 -2.83268,-1 -2.78394,0 -2.82225,0.33152 -2.27297,19.66666 l 0.55869,19.66667 h -16.39369 -16.39369 z m 25.16697,54.499998 4.16667,-0.83334 v -18.23333 c 0,-12.75555 0.50071,-18.76409 1.66666,-20 1.34509,-1.42579 1.28078,-1.64936 -0.33333,-1.15872 -1.60305,0.48729 -2.13232,4.15911 -2.66667,18.5 l -0.66666,17.89205 -11,0.38726 c -10.03501,0.35328 -13.63148,1.66203 -9.33333,3.39637 2.43844,0.98393 13.34631,1.01378 18.16666,0.0497 z m 65.5,-0.57869 c 0,-0.77661 0.6,-1.0412 1.33333,-0.58798 0.73333,0.45323 1.33333,0.18864 1.33333,-0.58798 0,-1.7634 -24.84475,-1.94791 -25.92961,-0.19257 -1.19455,1.93283 1.84819,2.5624 12.92961,2.67529 6.45017,0.0657 10.33334,-0.42536 10.33334,-1.30676 z m -61.6799,-79.539288 c -0.2654,-4.24345 -0.485,-1.11535 -0.48801,6.95131 -0.003,8.06667 0.21414,11.53858 0.48254,7.71535 0.26841,-3.82322 0.27087,-10.42322 0.005,-14.66666 z m 22.21323,13.48465 c 5.88739,-5.88739 6.1154,-9.6496 0.8,-13.2 -2.19578,-1.46667 -3.99406,-3.11667 -3.99616,-3.66667 -0.002,-0.55 -3.60384,-1 -8.00384,-1 h -8 v 11.33333 11.33334 h 7.2 c 6.48889,0 7.67408,-0.47408 12,-4.8 z m 180.54694,12.83082 c 0.2275,-31.14972 0.52868,-56.7509 0.6693,-56.89152 0.14063,-0.14063 17.95449,-0.4545 39.58638,-0.69749 l 39.33076,-0.44181 v 14.33333 14.33333 h -23.66673 -23.66666 v 7.33334 7.33333 h 21.99999 22.0001 l 0.015,9 c 0.01,4.95 0.3648,11.11595 0.7928,13.70211 l 0.7781,4.702108 -22.79281,-0.52263 -22.79278,-0.52264 v 8.9692 8.96921 l 23.66666,-0.49149 23.66673,-0.49149 v 14.00947 14.00948 h -40.00006 -40 z m 72.81074,53.826518 c 6.3687,-2.44391 -1.0769,-3.19068 -31.81234,-3.19068 -30.174,0 -39.37294,0.84872 -33.75366,3.11419 2.41084,0.97196 63.048,1.0427 65.566,0.0765 z m 2.1141,-21.19068 c -1e-4,-0.82422 -8.91055,-1.47236 -23.33601,-1.69743 -21.29703,-0.33229 -25.10541,0.15002 -22.41649,2.83894 1.48114,1.48115 45.7526,0.37659 45.7525,-1.14151 z m -34.33846,-0.32609 c 6.41666,-0.24442 16.91666,-0.24442 23.33333,0 6.41663,0.24442 1.16667,0.4444 -11.66667,0.4444 -12.83333,0 -18.08333,-0.19998 -11.66666,-0.4444 z m 20.72997,-23.997178 c -5.64851,-0.24931 -15.24851,-0.25069 -21.33333,-0.003 -6.08482,0.24762 -1.46331,0.4516 10.27002,0.45329 11.73334,0.002 16.71182,-0.20091 11.06331,-0.45022 z"
       id="path3" />
  </g>
</svg>`;
            
            // Конвертируем SVG в Data URL
            const svgBlob = new Blob([svgLogo], {type: 'image/svg+xml'});
            const svgUrl = URL.createObjectURL(svgBlob);
            
            // Загружаем SVG и создаем маску
            const tempImg = new Image();
            tempImg.onload = function() {
                createMaskFromImage(tempImg);
                URL.revokeObjectURL(svgUrl); // Освобождаем память
            };
            tempImg.onerror = function() {
                console.error("Не удалось загрузить SVG логотип");
                logoLoaded = false;
            };
            tempImg.src = svgUrl;
        }

        // Главная функция анимации
        function animate(currentTime) {
            // Ограничиваем частоту кадров
            if (currentTime - lastFrameTime < 1000 / frameRate) {
                requestAnimationFrame(animate);
                return;
            }

            lastFrameTime = currentTime;

            // Затемнение фона для эффекта следа
            matrixCtx.fillStyle = "rgba(0, 0, 0, 0.07)"; // Более быстрое затухание
            matrixCtx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);

            // Рисуем матричный дождь
            drawMatrixRain();

            // Продолжаем анимацию
            requestAnimationFrame(animate);
        }

        // Отрисовка матричного дождя
        function drawMatrixRain() {
            // Фоновые символы с низкой непрозрачностью
            for (let i = 0; i < columns; i++) {
                for (let j = 0; j < rows; j++) {
                    // Рисуем символ с вероятностью 5%
                    if (Math.random() > 0.95) {
                        const symbol = symbolArray[Math.floor(Math.random() * symbolArray.length)];
                        const isInLogo = logoLoaded && logoMask[j * columns + i] === 1;

                        if (isInLogo) {
                            // Бирюзово-голубой градиент для логотипа
                            const gradientColor = getGradientColor(j / rows);
                            matrixCtx.fillStyle = gradientColor;
                            matrixCtx.font = `bold ${fontSize}px monospace`;
                        } else {
                            // СЕРЫЙ ЦВЕТ ВМЕСТО ЗЕЛЕНОГО
                            matrixCtx.fillStyle = backgroundRainColor;
                            matrixCtx.font = `${fontSize}px monospace`;
                        }

                        matrixCtx.fillText(symbol, i * fontSize, j * fontSize);
                    }
                }
            }

            // Основные капли дождя
            for (let idx = 0; idx < drops.length; idx++) {
                const i = idx % columns; // Колонка
                const dropY = Math.floor(drops[idx]); // Текущая Y-позиция капли
                
                // Проверяем, находится ли капля в области логотипа
                const isInLogo = logoLoaded && dropY < rows && logoMask[dropY * columns + i] === 1;

                // Выбираем случайный символ
                const symbol = symbolArray[Math.floor(Math.random() * symbolArray.length)];
                
                // Настраиваем стиль в зависимости от положения
                if (isInLogo) {
                    // Для логотипа используем бирюзово-голубой градиент
                    const gradientPos = dropY / rows;
                    matrixCtx.fillStyle = getGradientColor(gradientPos);
                    matrixCtx.font = `bold ${fontSize + 2}px monospace`; // Увеличенный размер для логотипа
                } else {
                    // СЕРЫЙ ЦВЕТ ВМЕСТО ЗЕЛЕНОГО
                    matrixCtx.fillStyle = backgroundRainColorFull;
                    matrixCtx.font = `${fontSize}px monospace`;
                }

                // Рисуем символ
                matrixCtx.fillText(symbol, i * fontSize, dropY * fontSize);

                // Сбрасываем каплю, если она достигла низа
                if (dropY * fontSize > matrixCanvas.height && Math.random() > 0.95) {
                    drops[idx] = 0;
                } else {
                    // Увеличиваем скорость для капель в области логотипа
                    drops[idx] += isInLogo ? 0.5 : 1.5; // Капли в логотипе движутся медленнее
                }
            }
            
            // Добавляем больше капель в области логотипа для лучшей видимости
            if (logoLoaded && Math.random() > 0.7) {
                // Собираем список всех позиций в маске
                let logoPositions = [];
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < columns; x++) {
                        if (logoMask[y * columns + x] === 1) {
                            logoPositions.push({x, y});
                        }
                    }
                }
                
                // Если найдены позиции логотипа
                if (logoPositions.length > 0) {
                    // Выбираем случайную точку в логотипе
                    const pos = logoPositions[Math.floor(Math.random() * logoPositions.length)];
                    
                    // Находим ближайшую каплю в этой колонке
                    let closestDropIdx = -1;
                    let minDistance = rows;
                    
                    for (let idx = 0; idx < drops.length; idx++) {
                        if (idx % columns === pos.x) {
                            const distance = Math.abs(drops[idx] - pos.y);
                            if (distance < minDistance) {
                                minDistance = distance;
                                closestDropIdx = idx;
                            }
                        }
                    }
                    
                    // Если расстояние больше порогового, добавляем новую каплю
                    if (minDistance > 5 && closestDropIdx !== -1) {
                        // Устанавливаем каплю сверху логотипа
                        drops[closestDropIdx] = Math.max(0, pos.y - Math.random() * 5);
                    }
                }
            }
        }

        // Инициализация
        function init() {
            // Инициализируем капли дождя
            initDrops();
            
            // Загружаем логотип
            loadSVGLogo();
            
            // Начинаем анимацию
            requestAnimationFrame(animate);
        }

        // Обработка изменения размеров окна
        window.addEventListener('resize', () => {
            // Обновляем размеры холстов
            resizeCanvases();
            
            // Обновляем количество колонок и строк
            columns = Math.floor(matrixCanvas.width / fontSize);
            rows = Math.floor(matrixCanvas.height / fontSize);
            
            // Инициализируем новые капли дождя
            initDrops();
            
            // Перезагружаем логотип
            loadSVGLogo();
        });

        // Запускаем инициализацию после загрузки страницы
        window.addEventListener('load', init);
    </script>
</body>
</html>
